<%- include("../../views/partials/user/header") %>


<div class="container-fluid">
    <div class="row">
        <%- include("../../views/partials/user/sidebar") %>
 
        <div class="col-md-9 mt-4">
            <h2 class="profile-page-title mb-4">Order History</h2>

            <!-- Continue Shopping Button -->
            <div class="text-left mb-3">
                <a href="/shop" class="btn btn-outline-secondary py-2 px-3">Continue Shopping</a>
            </div>

            <div class="order-list">
                <% if (orderDetails.length === 0) { %>
                    <div class="no-orders">
                        <p>Your order history is empty. No orders found.</p>
                    </div>
                <% } else { %>
                    <% orderDetails.forEach((order) => { %>
                        <% order.items.forEach((item) => { %>
                            <div class="order-card d-flex align-items-start mb-1 p-2">
                                <!-- Product Image -->
                                <div class="product-image">
                                    <a href="#">
                                        <img src="/uploads/variant-images/<%= item.productImage %>" alt="No image">
                                    </a>
                                </div>

                                <!-- Order Details -->
                                <div class="order-details d-flex justify-content-between w-100">
                                    <!-- Product Info -->
                                    <div>
                                        <h5><%= item.productName %></h5>
                                        <p class="mb-1">Color: <%= item.color %></p>
                                    </div>

                                    <!-- Order Info (Price, Date, Status) -->
                                    <div class="order-info d-flex align-items-center">
                                        <div class="order-item-count">
                                            <%= item.quantity %> Item<%= item.quantity > 1 ? 's' : '' %>
                                        </div>
                                        <div class="order-price mx-3">
                                            â‚¹<%= item.productPrice %>
                                        </div>
                                        <div class="order-date">
                                            Ordered on: <%= new Date(item.createdOn).toLocaleDateString() %>
                                        </div>
                                        <div class="order-status mx-3 <%= item.status === 'Cancelled' ? 'text-danger' : 'text-success' %>">
                                            Status: <%= item.status %>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <% }); %>
                    <% }); %>
                <% } %>
            </div>
        </div>
    </div>
</div>

<%- include("../../views/partials/user/footer") %>
